(function(){function t(e,r,n){var i=t.resolve(e);if(null==i){n=n||e,r=r||"root";var o=Error('Failed to require "'+n+'" from "'+r+'"');throw o.path=n,o.parent=r,o.require=!0,o}var s=t.modules[i];return s.exports||(s.exports={},s.client=s.component=!0,s.call(this,s.exports,t.relative(i),s)),s.exports}t.modules={},t.aliases={},t.resolve=function(e){"/"===e.charAt(0)&&(e=e.slice(1));for(var r=e+"/index.js",n=[e,e+".js",e+".json",e+"/index.js",e+"/index.json"],i=0;n.length>i;i++){var e=n[i];if(t.modules.hasOwnProperty(e))return e}return t.aliases.hasOwnProperty(r)?t.aliases[r]:void 0},t.normalize=function(t,e){var r=[];if("."!=e.charAt(0))return e;t=t.split("/"),e=e.split("/");for(var n=0;e.length>n;++n)".."==e[n]?t.pop():"."!=e[n]&&""!=e[n]&&r.push(e[n]);return t.concat(r).join("/")},t.register=function(e,r){t.modules[e]=r},t.alias=function(e,r){if(!t.modules.hasOwnProperty(e))throw Error('Failed to alias "'+e+'", it does not exist');t.aliases[r]=e},t.relative=function(e){function r(t,e){for(var r=t.length;r--;)if(t[r]===e)return r;return-1}function n(r){var i=n.resolve(r);return t(i,e,r)}var i=t.normalize(e,"..");return n.resolve=function(n){var o=n.charAt(0);if("/"==o)return n.slice(1);if("."==o)return t.normalize(i,n);var s=e.split("/"),a=r(s,"deps")+1;return a||(a=0),n=s.slice(0,a+1).join("/")+"/deps/"+n},n.exists=function(e){return t.modules.hasOwnProperty(n.resolve(e))},n},t.register("component-indexof/index.js",function(t,e,r){var n=[].indexOf;r.exports=function(t,e){if(n)return t.indexOf(e);for(var r=0;t.length>r;++r)if(t[r]===e)return r;return-1}}),t.register("component-emitter/index.js",function(t,e,r){function n(t){return t?i(t):void 0}function i(t){for(var e in n.prototype)t[e]=n.prototype[e];return t}var o=e("indexof");r.exports=n,n.prototype.on=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks[t]=this._callbacks[t]||[]).push(e),this},n.prototype.once=function(t,e){function r(){n.off(t,r),e.apply(this,arguments)}var n=this;return this._callbacks=this._callbacks||{},e._off=r,this.on(t,r),this},n.prototype.off=n.prototype.removeListener=n.prototype.removeAllListeners=function(t,e){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var r=this._callbacks[t];if(!r)return this;if(1==arguments.length)return delete this._callbacks[t],this;var n=o(r,e._off||e);return~n&&r.splice(n,1),this},n.prototype.emit=function(t){this._callbacks=this._callbacks||{};var e=[].slice.call(arguments,1),r=this._callbacks[t];if(r){r=r.slice(0);for(var n=0,i=r.length;i>n;++n)r[n].apply(this,e)}return this},n.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks[t]||[]},n.prototype.hasListeners=function(t){return!!this.listeners(t).length}}),t.register("holla/dist/holla.js",function(t,e,r){(function(){var t,n,i,o;n=e("./Client"),t=e("./Call"),o=e("./shims"),i={createClient:function(t){return null==t&&(t={}),new n(t)},Call:t,Client:n,shims:o,supported:o.supported,config:o.PeerConnConfig,createStream:function(t,e){var r,n;return null==o.getUserMedia?e("Missing getUserMedia"):(r=e,n=function(t){return e(null,t)},o.getUserMedia(t,n,r),i)},createFullStream:function(t){return i.createStream({video:!0,audio:!0},t)},createVideoStream:function(t){return i.createStream({video:!0,audio:!1},t)},createAudioStream:function(t){return i.createStream({video:!1,audio:!0},t)}},r.exports=i}).call(this)}),t.register("holla/dist/Client.js",function(t,e,r){(function(){var t,n,i,o,s={}.hasOwnProperty,a=function(t,e){function r(){this.constructor=t}for(var n in e)s.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};i=e("emitter"),o=io,t=e("./Call"),n=function(e){function r(e){var r=this;this.options=null!=e?e:{},this.io=o.connect(this.options.host),this.io.on("reconnect",function(){return r.emit("reconnect")}),this.io.on("disconnect",function(){return r.emit("disconnect")}),this.io.on("error",function(t){return r.emit("error",t)}),this.io.on("callRequest",function(e){var n;return n=new t(r,e.id,e.caller),r.emit("call",n)})}return a(r,e),r.prototype.createCall=function(e){var r=this;return this.io.emit("createCall",function(n,i){var o;return null!=n?e(n):(o=new t(r,i),e(null,o))}),this},r.prototype.register=function(t,e){return this.io.emit("register",t,e)},r.prototype.unregister=function(t){return this.io.emit("unregister",t)},r}(i),r.exports=n}).call(this)}),t.register("holla/dist/Call.js",function(t,e,r){(function(){var t,n,i,o,s={}.hasOwnProperty,a=function(t,e){function r(){this.constructor=t}for(var n in e)s.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},l=function(t,e){return function(){return t.apply(e,arguments)}};o=e("./shims"),n=e("emitter"),i=function(t){function e(t,e){this.call=t,this.name=e}return a(e,t),e.prototype.ready=function(){},e}(n),t=function(t){function e(t,e,r){this.client=t,this.id=e,this._handleUserResponse=l(this._handleUserResponse,this),this.unmute=l(this.unmute,this),this.mute=l(this.mute,this),this.releaseLocalStream=l(this.releaseLocalStream,this),this.setLocalStream=l(this.setLocalStream,this),this.add=l(this.add,this),this.decline=l(this.decline,this),this.answer=l(this.answer,this),this._users={},r&&(this.caller=new i(this,r),this._users[r]=this.caller)}return a(e,t),e.prototype.answer=function(){return this.client.io.emit(""+this.id+":callResponse",!0),this.client.emit("callAnswered",this),this},e.prototype.decline=function(){return this.client.io.emit(""+this.id+":callResponse",!1),this.client.emit("callDeclined",this),this},e.prototype.add=function(t){var e;return e=new i(this,t),this._users[t]=e,this.client.io.emit("addUser",this.id,t,this._handleUserResponse(e)),this._users[t]},e.prototype.user=function(t){return this._users[t]},e.prototype.users=function(){return this._users},e.prototype.setLocalStream=function(t){return this.localStream=t,this},e.prototype.releaseLocalStream=function(){return this.localStream.stop(),delete this.localStream,this},e.prototype.mute=function(){var t,e,r,n;if(!this.localStream)return this;for(n=this.localStream.getAudioTracks(),e=0,r=n.length;r>e;e++)t=n[e],t.enabled=!1;return this},e.prototype.unmute=function(){var t,e,r,n;if(!this.localStream)return this;for(n=this.localStream.getAudioTracks(),e=0,r=n.length;r>e;e++)t=n[e],t.enabled=!0;return this},e.prototype._handleUserResponse=function(t){var e=this;return function(r){return null!=r?"Call declined"===r?(t.accepted=!1,t.emit("declined"),e.emit("userDeclined",e._users[name])):(t.emit("error",r),e.emit("error",r)):(t.accepted=!0,t.emit("answered"))}},e}(n),r.exports=t}).call(this)}),t.register("holla/dist/shims.js",function(t,e,r){(function(){var t,e,n,i,o,s,a,l,c,u,h,p,f,d,m,v;n=window.mozRTCPeerConnection||window.PeerConnection||window.webkitPeerConnection00||window.webkitRTCPeerConnection,t=window.mozRTCIceCandidate||window.RTCIceCandidate,i=window.mozRTCSessionDescription||window.RTCSessionDescription,e=window.MediaStream||window.webkitMediaStream,c=navigator.mozGetUserMedia||navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.msGetUserMedia,o=window.URL||window.webkitURL||window.msURL||window.oURL,null!=c&&(c=c.bind(navigator)),a=navigator.mozGetUserMedia?"firefox":"chrome",m=null!=n&&null!=c,l=function(t,e){var r;return r=t.match(e),null!=r?r[1]:null},f=function(t,e){var r,n,i,o,s,a;for(n=t.split(" "),o=[],i=s=0,a=n.length;a>s;i=++s)r=n[i],3===i&&(o[i++]=e),r!==e&&(o[i++]=r);return o.join(" ")},p=function(t,e){var r,n,i,o,s,a,c;for(o=t[e].split(" "),n=a=0,c=t.length;c>a;n=++a)i=t[n],null!=i&&(s=l(i,/a=rtpmap:(\d+) CN\/\d+/i),null!=s&&(r=o.indexOf(s),-1!==r&&o.splice(r,1),t.splice(n,1)));return t[e]=o.join(" "),t},v=function(t){var e,r,n,i,o,s,a;if(n=t.split("\r\n"),i=function(){var t,i,o;for(o=[],e=t=0,i=n.length;i>t;e=++t)r=n[e],-1!==r.indexOf("m=audio")&&o.push(e);return o}()[0],null==i)return t;for(e=s=0,a=n.length;a>s;e=++s)if(r=n[e],-1!==r.indexOf("opus/48000")){o=l(r,/:(\d+) opus\/48000/i),null!=o&&(n[i]=f(n[i],o));break}return n=p(n,i),n.join("\r\n")},h=function(t){var e,r,n,i,o,s,l,c,u;if(n=[],"firefox"===a)for(e="a=crypto:1 AES_CM_128_HMAC_SHA1_80 inline:BAADBAADBAADBAADBAADBAADBAADBAADBAADBAAD",c=t.split("\r\n"),i=0,s=c.length;s>i;i++)r=c[i],n.push(r),0===r.indexOf("m=")&&n.push(e);else for(u=t.split("\r\n"),o=0,l=u.length;l>o;o++)r=u[o],-1===r.indexOf("a=ice-options:google-ice")&&n.push(r);return v(n.join("\r\n"))},u=function(t){return t},s=function(t,e){var r,n,i;if("string"==typeof e)return s(t,document.getElementById(e));if(e.jquery)for(e.attr("src",t),n=0,i=e.length;i>n;n++)r=e[n],r.play();else e.src=t,e.play();return e},d=function(){var r,l,p;if(m)return"firefox"===a?(r={iceServers:[{url:"stun:23.21.150.121"}]},l={mandatory:{OfferToReceiveAudio:!0,OfferToReceiveVideo:!0,MozDontOfferDataChannel:!0}},e.prototype.getVideoTracks=function(){return[]},e.prototype.getAudioTracks=function(){return[]}):(r={iceServers:[{url:"stun:stun.l.google.com:19302"}]},l={mandatory:{OfferToReceiveAudio:!0,OfferToReceiveVideo:!0},optional:[{DtlsSrtpKeyAgreement:!0}]},e.prototype.getVideoTracks||(e.prototype.getVideoTracks=function(){return this.videoTracks},e.prototype.getAudioTracks=function(){return this.audioTracks}),n.prototype.getLocalStreams||(n.prototype.getLocalStreams=function(){return this.localStreams},n.prototype.getRemoteStreams=function(){return this.remoteStreams})),e.prototype.pipe=function(t){var e;return e=o.createObjectURL(this),s(e,t),this},p={PeerConnection:n,IceCandidate:t,SessionDescription:i,MediaStream:e,getUserMedia:c,URL:o,attachStream:s,processSDPIn:u,processSDPOut:h,PeerConnConfig:r,browser:a,supported:m,constraints:l}},r.exports=d()}).call(this)}),t.alias("component-emitter/index.js","holla/deps/emitter/index.js"),t.alias("component-indexof/index.js","component-emitter/deps/indexof/index.js"),t.alias("holla/dist/holla.js","holla/index.js"),"object"==typeof exports?module.exports=t("holla"):"function"==typeof define&&define.amd?define(function(){return t("holla")}):window.holla=t("holla")})();